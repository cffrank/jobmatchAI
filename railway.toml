# =============================================================================
# Railway Deployment Configuration - JobMatch AI Frontend (Vite React)
# =============================================================================
# This file configures how Railway builds and deploys the Vite React frontend.
# Documentation: https://docs.railway.app/deploy/config-as-code

[build]
# Builder to use for the deployment
builder = "DOCKERFILE"

# Path to Dockerfile (optional - Railway auto-detects if in root)
dockerfilePath = "Dockerfile"

# Watch patterns - trigger rebuild on these file changes
watchPatterns = ["src/**/*", "index.html", "package.json", "vite.config.ts", "Dockerfile"]

[deploy]
# Command to serve the static files from dist/
# Uses custom server.js that explicitly reads PORT env var
startCommand = "node server.js"

# Disable health check - static sites don't need /health endpoint
healthcheckPath = ""
healthcheckTimeout = 300

# Restart policy on crashes
restartPolicyType = "ON_FAILURE"

# Maximum restart attempts
restartPolicyMaxRetries = 10

# Railway automatically injects PORT and NODE_ENV environment variables
# No [env] section needed - let Railway manage environment variables
